<% content_for :title, "Posts" %>

<!-- Animated Notice -->
<% if notice %>
  <div class="alert alert-success alert-dismissible fade show shadow-sm border-0 mb-4" role="alert" style="background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);">
    <i class="bi bi-check-circle-fill me-2"></i>
    <strong><%= notice %></strong>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
<% end %>

<div class="container-fluid px-4 py-5">
  
  <!-- Hero Header -->
  <div class="row mb-5">
    <div class="col-12">
      <div class="text-center position-relative">
        <!-- Decorative Background -->
        <div class="position-absolute top-50 start-50 translate-middle w-100" style="z-index: -1;">
          <div class="mx-auto" style="width: 300px; height: 300px; background: radial-gradient(circle, rgba(102,126,234,0.1) 0%, transparent 70%); filter: blur(40px);"></div>
        </div>
        
        <h1 class="display-3 fw-bold mb-3" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
          ‚ú® Discover Posts
        </h1>
        <p class="lead text-muted mb-4">Explore stories, ideas, and insights from our community</p>
        
        <!-- Action Buttons -->
        <div class="d-flex gap-3 justify-content-center flex-wrap">
          <%= link_to new_post_path, class: "btn btn-lg px-5 fw-bold text-white shadow-lg position-relative overflow-hidden", 
              style: "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 30px; border: none;" do %>
            <span class="position-relative" style="z-index: 1;">
              <i class="bi bi-plus-circle me-2"></i>Create Post
            </span>
            <div class="shine-effect position-absolute top-0 start-0 w-100 h-100"></div>
          <% end %>
          
          <% if user_signed_in? %>
            <%= button_to destroy_user_session_path, method: :delete, 
                class: "btn btn-lg btn-outline-danger px-4 fw-bold shadow-sm", 
                style: "border-radius: 30px; border-width: 2px;",
                data: { confirm: "Are you sure you want to log out?" } do %>
              <i class="bi bi-box-arrow-right me-2"></i>Log Out
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- Stats Bar -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card border-0 shadow-sm" style="background: linear-gradient(135deg, #f8f9ff 0%, #e9ecff 100%); border-radius: 15px;">
        <div class="card-body py-3">
          <div class="d-flex justify-content-center gap-5 flex-wrap">
            <div class="text-center">
              <h4 class="fw-bold mb-0" style="color: #667eea;"><%= @posts.count %></h4>
              <small class="text-muted">Total Posts</small>
            </div>
            <div class="vr"></div>
            <div class="text-center">
              <h4 class="fw-bold mb-0" style="color: #764ba2;">
                <i class="bi bi-fire"></i>
              </h4>
              <small class="text-muted">Trending</small>
            </div>
            <div class="vr"></div>
            <div class="text-center">
              <h4 class="fw-bold mb-0" style="color: #f093fb;">
                <i class="bi bi-people-fill"></i>
              </h4>
              <small class="text-muted">Community</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Posts Grid -->
  <div id="posts" class="row g-4 posts-grid">
    <% if @posts.any? %>
      <%= render partial: "posts/post", collection: @posts %>
    <% else %>
      <div class="col-12">
        <div class="text-center py-5">
          <div class="mb-4" style="font-size: 5rem; opacity: 0.3;">üìù</div>
          <h3 class="text-muted mb-3">No posts yet</h3>
          <p class="text-muted mb-4">Be the first to share something amazing!</p>
          <%= link_to "Create First Post", new_post_path, class: "btn btn-primary btn-lg px-5", style: "border-radius: 30px;" %>
        </div>
      </div>
    <% end %>
  </div>

</div>

<style>
/* Shine effect on button */
.shine-effect {
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  animation: shine 3s infinite;
}

@keyframes shine {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* Posts grid fade in */
.posts-grid > div {
  animation: